{
    "openapi": "3.0.2",
    "info": {
        "title": "Z2O API",
        "description": "Z2O API to be used by Banks for integration.",
        "version": "v1.1"
    },
    "paths": {
        "/bank/register": {
            "post": {
                "tags": [
                    "Bank - Auth"
                ],
                "summary": "Register a new bank",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Bank.Bank"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.BankDisplay"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/auth": {
            "post": {
                "tags": [
                    "Bank - Auth"
                ],
                "summary": "Get API Key for your bank",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Bank.BankLogin"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.BankAuth"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies": {
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get list of companies connected to bank",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": '#/components/schemas/Z2O.Models.Company.CompanyResponse'
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Add a new company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.AddCompany"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": '#/components/schemas/Z2O.Models.Company.CompanyDisplay'
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}": {
            "put": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Update info of a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Delete a particular company, this is not reversible",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            },
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get info of a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/settings": {
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get the settings for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Update settings for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.HelloWorld"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/connection": {
            "get": {
                "tags": [
                    "Bank - Company Connection"
                ],
                "summary": "Get connection details for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/data/reports": {
            "get": {
                "tags": [
                    "Bank - Data"
                ],
                "summary": "Get connection details for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/data/reports/{reportName}": {
            "get": {
                "tags": [
                    "Bank - Data"
                ],
                "summary": "Get connection details for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/auth": {
            "post": {
                "tags": [
                    "Company - Auth"
                ],
                "summary": "Get API Key for your company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.HelloWorld"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/connection": {
            "post": {
                "tags": [
                    "Company - Connection"
                ],
                "summary": "Add a new ERP connection for the company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.HelloWorld"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports/all": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get list of all reports a company can provide for its ERP connection",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get list of reports company is providing",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Add a new report to provide",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.HelloWorld"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports/{reportName}": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get latest data of a particular report that will be pushed",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Annotate the data of a particular report and then push it to bank",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.HelloWorld"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.HelloWorld"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Stop providing a particular report",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Z2O.HelloWorld": {
                "type": "string",
                "example": "Hello World"
            },
            "Z2O.Models.Bank.Bank":{
              "required": [
                "userId",
                "password",
                "email",
                "name",
              ],
              "type": "object",
              "properties": {
                "userId":{
                  "type": "string"
                },
                "password":{
                  "type": "string"
                },
                "email":{
                  "type":"string",
                  "format": "email"
                },
                "name":{
                  "type": "string"
                },
                "primaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "secondaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "coverImg":{
                  "type": "string",
                  "format": "byte"
                }
              }
            },
            "Z2O.Models.Bank.BankDisplay": {
              "required": [
                "id",
                "userId",
                "email",
                "name"
              ],
              "type": "object",
              "properties": {
                "id":{
                  "type": "string",
                  "format": "uuid"
                },
                "userId":{
                  "type": "string"
                },
                "email":{
                  "type":"string",
                  "format": "email"
                },
                "name":{
                  "type": "string"
                },
                "primaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "secondaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "coverImg":{
                  "type": "string",
                  "format": "byte"
                }
              }
            },
            "Z2O.Models.Bank.BankAuth":{
              "type": "object",
              "properties":{
                "authKey": {
                  "type": "string",
                  "format": "key"
                },
                "data":{
                  "$ref":"#/components/schemas/Z2O.Models.Bank.BankDisplay"
                }
              }
            },
            "Z2O.Models.Company.CompanyResponse": {
                "required": [
                    "totalResults"
                ],
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                        },
                        "nullable": true
                    },
                    "totalResults": {
                        "type": "integer",
                        "format": "int32"
                    }
                },
                "additionalProperties": false
            },
            "Z2O.Models.Company.Company": {
                "required": [
                    "id",
                    "cid",
                    "password",
                    "name",
                    "status",
                    "region",
                    "companyType"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "cid":{
                        "type": "string"
                    },
                    "password":{
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "platform": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "region": {
                        "type": "string"
                    },
                    "companyType": {
                        "type": "string"
                    },
                    "businessLine":{
                        "type": "string",
                        "nullable": true
                    },
                    "SIF": {
                        "type": "string",
                        "nullable": true
                    },
                    "reports": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                        },
                        "nullable": true
                    },
                    "dataConnection": {
                        "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection",
                        "nullable": true
                    },
                    "created": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Z2O.Models.Company.CompanyDisplay": {
                "required": [
                    "id",
                    "cid",
                    "name",
                    "status",
                    "region",
                    "companyType"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "cid":{
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "platform": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "region": {
                        "type": "string"
                    },
                    "companyType": {
                        "type": "string"
                    },
                    "businessLine":{
                        "type": "string",
                        "nullable": true
                    },
                    "SIF": {
                        "type": "string",
                        "nullable": true
                    },
                    "reports": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                        },
                        "nullable": true
                    },
                    "dataConnection": {
                        "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection",
                        "nullable": true
                    },
                    "created": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Z2O.Models.Company.Report":{
              "required":[
                "id",
                "name"
              ],
              "type": "object",
              "properties" : {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "name": {
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "enum": [
                    "hello" :{
                      "type": "object",
                      "properties":{
                        "name": "string"
                      }
                    }
                  ]
                },
                "lastPushDate": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            },
            "Z2O.Models.Company.AddCompany": {
              "required":[
                "cid",
                "name",
                "platform",
                "region",
                "companyType",
                "businessLine",
                "SIF"
              ],
              "type": "object",
              "properties": {
                "cid":{
                  "type":"string"
                },
                "name": {
                    "type": "string"
                },
                "platform": {
                    "type": "string",
                },
                "region": {
                    "type": "string"
                },
                "companyType": {
                    "type": "string"
                },
                "businessLine":{
                    "type": "string",
                },
                "SIF": {
                    "type": "string",
                }
              }
            },
            "Z2O.Models.Color.RGBColor":{
              "type": "object",
              "properties": {
                "r" :{
                  "type": "integer",
                  "format": "int32",
                },
                "g" :{
                  "type": "integer",
                  "format": "int32",
                },
                "b" :{
                  "type": "integer",
                  "format": "int32",
                }
              }
            }
        }
    }
}