{
    "openapi": "3.0.2",
    "info": {
        "title": "Z2O API",
        "description": "Z2O API to be used by Banks for integration.",
        "version": "v0.1"
    },
    "paths": {
        "/bank/register": {
            "post": {
                "tags": [
                    "Bank - Auth"
                ],
                "summary": "Register a new bank",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Bank.Bank"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.BankDisplay"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/auth": {
            "post": {
                "tags": [
                    "Bank - Auth"
                ],
                "summary": "Get API Key for your bank",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Bank.BankLogin"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.BankAuth"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies": {
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get list of companies connected to bank",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": '#/components/schemas/Z2O.Models.Company.CompanyList'
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Add a new company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.CompanyAdd"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": '#/components/schemas/Z2O.Models.Company.CompanyDisplay'
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}": {
            "put": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Update info of a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.CompanyUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Delete a particular company, this is not reversible",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            },
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get info of a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/settings": {
            "get": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Get the settings for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.SettingsDisplay"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Bank - Companies"
                ],
                "summary": "Update settings for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.SettingsUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.SettingsDisplay"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/connection": {
            "get": {
                "tags": [
                    "Bank - Company Connection"
                ],
                "summary": "Get connection details for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/data/reports": {
            "get": {
                "tags": [
                    "Bank - Data"
                ],
                "summary": "Get all the reports provided for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.ReportList"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/bank/companies/{companyId}/data/reports/{reportName}": {
            "get": {
                "tags": [
                    "Bank - Data"
                ],
                "summary": "Get connection details for a particular company",
                "parameters": [{
                    "name": "companyId",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string",
                        "format": "uuid"
                    }
                },
                {
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.Report"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/auth": {
            "post": {
                "tags": [
                    "Company - Auth"
                ],
                "summary": "Get API Key for your company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.CompanyLogin"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/connection": {
            "post": {
                "tags": [
                    "Company - Connection"
                ],
                "summary": "Add a new ERP connection for the company",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.DataConnectionAdd"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports/all": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get list of all reports a company can provide for its ERP connection",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.ReportNameList"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get list of reports company is providing",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.ReportList"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Add a new report to provide",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.ReportAdd"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/company/data/reports/{reportName}": {
            "get": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Get latest data of a particular report that will be pushed",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Annotate the data of a particular report and then push it to bank",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Z2O.Models.Company.ReportAnnotated"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Z2O.Models.Bank.Report"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Company - Data"
                ],
                "summary": "Stop providing a particular report",
                "parameters": [{
                    "name": "reportName",
                    "in": "path",
                    "required": true,
                    "schema": {
                        "type": "string"
                    }
                }],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Z2O.HelloWorld": {
                "type": "string",
                "example": "Hello World"
            },
            "Z2O.Models.Bank.Bank":{
              "required": [
                "userId",
                "password",
                "email",
                "name",
              ],
              "type": "object",
              "properties": {
                "userId":{
                  "type": "string"
                },
                "password":{
                  "type": "string"
                },
                "email":{
                  "type":"string",
                  "format": "email"
                },
                "name":{
                  "type": "string"
                },
                "primaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "secondaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "coverImg":{
                  "type": "string",
                  "format": "byte"
                }
              }
            },
            "Z2O.Models.Bank.BankDisplay": {
              "required": [
                "id",
                "userId",
                "email",
                "name"
              ],
              "type": "object",
              "properties": {
                "id":{
                  "type": "string",
                  "format": "uuid"
                },
                "userId":{
                  "type": "string"
                },
                "email":{
                  "type":"string",
                  "format": "email"
                },
                "name":{
                  "type": "string"
                },
                "primaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "secondaryColor":{
                  "$ref" : "#/components/schemas/Z2O.Models.Color.RGBColor"
                },
                "coverImg":{
                  "type": "string",
                  "format": "byte"
                },
                "createdAt":{
                  "type":"string",
                  "format":"date-time"
                }
              }
            },
            "Z2O.Models.Bank.BankAuth":{
              "type": "object",
              "properties":{
                "authKey": {
                  "type": "string",
                  "format": "key"
                },
                "data":{
                  "$ref":"#/components/schemas/Z2O.Models.Bank.BankDisplay"
                }
              }
            },
            "Z2O.Models.Bank.BankLogin":{
              "type": "object",
              "properties":{
                "userId": {
                  "type":"string"
                },
                "password": {
                  "type": "string",
                  "format": "password"
                }
              }
            },
            "Z2O.Models.Bank.Report":{
              "required":[
                "id",
                "cid",
                "name"
              ],
              "type": "object",
              "properties" : {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "cid": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "enum": [
                    "hello" :{
                      "type": "object",
                      "properties":{
                        "name": "string"
                      }
                    }
                  ]
                },
                "lastPushDate": {
                  "type": "string",
                  "format": "date-time"
                },
                "lastUpdateMadeBy": {
                  "type": "string"
                }
              }
            },
            "Z2O.Models.Bank.ReportList":{
              "required": [
                "totalResults"
              ],
              "type": "object",
              "properties": {
                "totalResults": {
                  "type" : "integer"
                },
                "reports":{
                  "type": "array",
                  "items": {
                    "$ref" : "#/components/schemas/Z2O.Models.Bank.Report"
                  }
                }
              }
            },
            "Z2O.Models.Company.Company": {
                "required": [
                    "id",
                    "cid",
                    "bankId",
                    "password",
                    "name",
                    "email",
                    "status",
                    "region",
                    "companyType"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "cid":{
                        "type": "string"
                    },
                    "bankId":{
                        "type": "string"
                    },
                    "password":{
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "email": {
                      "type":"string",
                      "format": "email"
                    },
                    "platform": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "region": {
                        "type": "string"
                    },
                    "companyType": {
                        "type": "string"
                    },
                    "businessLine":{
                        "type": "string",
                        "nullable": true
                    },
                    "SIF": {
                        "type": "string",
                        "nullable": true
                    },
                    "reports": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                        },
                        "nullable": true
                    },
                    "dataConnection": {
                        "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection",
                        "nullable": true
                    },
                    "created": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Z2O.Models.Company.CompanyDisplay": {
                "required": [
                    "id",
                    "cid",
                    "bankId",
                    "name",
                    "email",
                    "status",
                    "region",
                    "companyType"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "cid":{
                        "type": "string"
                    },
                    "bankId":{
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "email": {
                      "type": "string",
                      "format": "email"
                    },
                    "platform": {
                        "type": "string",
                        "nullable": true
                    },
                    "status": {
                        "type": "string"
                    },
                    "region": {
                        "type": "string"
                    },
                    "companyType": {
                        "type": "string"
                    },
                    "businessLine":{
                        "type": "string",
                        "nullable": true
                    },
                    "SIF": {
                        "type": "string",
                        "nullable": true
                    },
                    "reports": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                        },
                        "nullable": true
                    },
                    "dataConnection": {
                        "$ref": "#/components/schemas/Z2O.Models.Company.DataConnection"
                    },
                    "created": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    }
                }
            },
            "Z2O.Models.Company.CompanyAdd": {
              "required":[
                "cid",
                "name",
                "email",
                "platform",
                "region",
                "companyType",
                "businessLine",
                "SIF"
              ],
              "type": "object",
              "properties": {
                "cid":{
                  "type":"string"
                },
                "name": {
                    "type": "string"
                },
                "email": {
                  "type":"string",
                  "format": "email"
                },
                "platform": {
                    "type": "string",
                },
                "region": {
                    "type": "string"
                },
                "companyType": {
                    "type": "string"
                },
                "businessLine":{
                    "type": "string",
                },
                "SIF": {
                    "type": "string",
                }
              }
            },
            "Z2O.Models.Company.CompanyUpdate": {
              "type": "object",
              "properties": {
                "cid":{
                  "type":"string"
                },
                "name": {
                    "type": "string"
                },
                "email": {
                  "type":"string",
                  "format": "email"
                },
                "platform": {
                    "type": "string",
                },
                "region": {
                    "type": "string"
                },
                "companyType": {
                    "type": "string"
                },
                "businessLine":{
                    "type": "string",
                },
                "SIF": {
                    "type": "string",
                }
              }
            },
            "Z2O.Models.Company.CompanyLogin":{
              "type": "object",
              "properties":{
                "cid": {
                  "type":"string"
                },
                "password": {
                  "type": "string",
                  "format": "password"
                }
              }
            },
            "Z2O.Models.Company.CompanyList": {
                "required": [
                    "totalResults"
                ],
                "type": "object",
                "properties": {
                    "results": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Z2O.Models.Company.CompanyDisplay"
                        },
                        "nullable": true
                    },
                    "totalResults": {
                        "type": "integer",
                        "format": "int32"
                    }
                },
                "additionalProperties": false
            },
            "Z2O.Models.Company.Report":{
              "required":[
                "id",
                "cid",
                "name"
              ],
              "type": "object",
              "properties" : {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "cid": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "enum": [
                    "hello" :{
                      "type": "object",
                      "properties":{
                        "name": "string"
                      }
                    }
                  ]
                },
                "lastPushDate": {
                  "type": "string",
                  "format": "date-time"
                },
                "lastUpdateMadeBy": {
                  "type": "string"
                }
              }
            },
            "Z2O.Models.Company.ReportAdd": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                }
              }
            },
            "Z2O.Models.Company.ReportType":{
              "required":[
                "name",
                "connectionName"
              ],
              "type": "object",
              "properties" : {
                "connectionType": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                }
              }
            },
            "Z2O.Models.Company.ReportAnnotated": {
              "type": "object",
              "properties": {
                "report":{
                  "$ref": "#/components/schemas/Z2O.Models.Company.Report"
                },
                "annotations":{
                  "type": "array",
                  "items":{
                    "$ref": "#/components/schemas/Z2O.Models.Company.Annotations"
                  }
                }
              }
            },
            "Z2O.Models.Company.ReportList":{
              "required": [
                "totalResults"
              ],
              "type": "object",
              "properties": {
                "totalResults": {
                  "type" : "integer"
                },
                "reports":{
                  "type": "array",
                  "items": {
                    "$ref" : "#/components/schemas/Z2O.Models.Company.Report"
                  }
                }
              }
            },
            "Z2O.Models.Company.ReportNameList":{
              "required": [
                "totalResults"
              ],
              "type": "object",
              "properties": {
                "totalResults": {
                  "type" : "integer"
                },
                "connectionName": {
                  "type" : "string",
                  "enum": ["sage", "tally", "zoho"]
                },
                "reports":{
                  "type": "array",
                  "items": {
                    "$ref" : "#/components/schemas/Z2O.Models.Company.ReportType"
                  }
                }
              }
            },
            "Z2O.Models.Company.Annotations": {
              "type": "object",
              "properties": {
                "rowId": {
                  "type": "string",
                  "format": "uuid"
                },
                "adjustment": {
                  "type": "number"
                },
                "comment":{
                  "type": "string"
                },
              }
            },
            "Z2O.Models.Company.DataConnection":{
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "cid": {
                  "type": "string"
                },
                "name":{
                  "type": "string",
                  "enum": ["sage", "tally", "zoho"]
                },
                "endpoint":{
                  "type": "string",
                  "format": "uri"
                },
                "status":{
                  "type": "string"
                }
              }
            },
            "Z2O.Models.Company.DataConnectionAdd":{
              "type": "object",
              "properties": {
                "name":{
                  "type": "string",
                  "enum": ["sage", "tally", "zoho"]
                },
                "endpoint":{
                  "type": "string",
                  "format": "uri"
                },
                "accessKey":{
                  "type": "string",
                  "format": "key"
                }
              }
            },
            "Z2O.Models.Company.SettingsDisplay": {
              "required":[
                "id",
                "companyId",
                "updatePeriod",
                "allowedToChangeConnection",
              ],
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "companyId": {
                  "type" : "string"
                },
                "updatePeriod": {
                  "type": "string",
                  "enum": ["monthly", "quarterly", "semi-anually", "anually"]
                },
                "allowedToChangeConnection": {
                  "type": "boolean"
                }
              }
            },
            "Z2O.Models.Company.SettingsUpdate":{
              "type": "object",
              "properties": {
                "companyId": {
                  "type" : "string"
                },
                "updatePeriod": {
                  "type": "string",
                  "enum": ["monthly", "quarterly", "semi-anually", "anually"]
                },
                "allowedToChangeConnection": {
                  "type": "boolean"
                }
              }
            },
            "Z2O.Models.Color.RGBColor":{
              "type": "object",
              "properties": {
                "r" :{
                  "type": "integer",
                  "format": "int32",
                },
                "g" :{
                  "type": "integer",
                  "format": "int32",
                },
                "b" :{
                  "type": "integer",
                  "format": "int32",
                }
              }
            }
        }
    }
}